[gd_scene load_steps=21 format=3 uid="uid://djc78b1oo870w"]

[ext_resource type="Script" uid="uid://buudbiv2a8l38" path="res://Scripts/MainScene.gd" id="1_hpc76"]
[ext_resource type="PackedScene" uid="uid://dyh26kibjre2t" path="res://Scenes/Room1.tscn" id="2_hx8n4"]
[ext_resource type="PackedScene" uid="uid://bhyy0dr278vwm" path="res://Scenes/Agent.tscn" id="3_7rqgy"]
[ext_resource type="PackedScene" uid="uid://c0iktnuw2tq5e" path="res://Scenes/controllable_agent.tscn" id="4_7rqgy"]
[ext_resource type="Texture2D" uid="uid://chxbbm6rcbiv7" path="res://Sprites/UI/play_button.png" id="5_f140w"]
[ext_resource type="Texture2D" uid="uid://dq30cwtvbe3ys" path="res://Sprites/UI/reset_button.png" id="5_i0j58"]
[ext_resource type="Texture2D" uid="uid://3of863yjwjag" path="res://Sprites/UI/pause_button.png" id="6_0iob3"]
[ext_resource type="Texture2D" uid="uid://c7jojxb8l0wug" path="res://Sprites/UI/export.png" id="6_c1ier"]
[ext_resource type="Script" uid="uid://bjwvl67x21w6o" path="res://Scripts/UI/reset_button.gd" id="6_gyaec"]
[ext_resource type="Script" uid="uid://dy5vhn4eanosj" path="res://Scripts/UI/time_button.gd" id="7_4b75m"]
[ext_resource type="Texture2D" uid="uid://1bjfxon0kx5f" path="res://Sprites/UI/import.png" id="7_gyaec"]
[ext_resource type="Script" uid="uid://ehpl30n4ucsy" path="res://Scripts/UI/export_button.gd" id="8_p5ymy"]
[ext_resource type="Texture2D" uid="uid://b3oui05oivany" path="res://Sprites/UI/skip_button.png" id="8_xb4mg"]
[ext_resource type="Script" uid="uid://ccivq383t64hp" path="res://Scripts/UI/skip_button.gd" id="9_5qxwa"]
[ext_resource type="Texture2D" uid="uid://b7l11xkp8vjbr" path="res://Sprites/UI/loop_button_disabled.png" id="9_6t1o7"]
[ext_resource type="Script" uid="uid://coi2il8fct4ip" path="res://Scripts/UI/import_button.gd" id="10_3va76"]
[ext_resource type="Texture2D" uid="uid://ce6t8tii4kdhw" path="res://Sprites/UI/loop_button_enabled.png" id="10_5qxwa"]
[ext_resource type="Script" uid="uid://sbkdbmhxekm5" path="res://Scripts/UI/loop_button.gd" id="12_xc4hf"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_q68mp"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_f140w"]
bg_color = Color(0.58260643, 0.33223593, 0.4826411, 1)

[node name="MainScene" type="Node2D"]
process_mode = 3
script = ExtResource("1_hpc76")
start_agent_count = 100
RoomsScene = Dictionary[String, PackedScene]({
"Room1": ExtResource("2_hx8n4")
})
AgentScene = ExtResource("3_7rqgy")
ControllableAgentScene = ExtResource("4_7rqgy")

[node name="SimulationCamera" type="Camera2D" parent="."]
zoom = Vector2(1.2, 1.2)

[node name="UIComponents" type="CanvasLayer" parent="."]
process_mode = 3

[node name="SimulationHUD" type="PanelContainer" parent="UIComponents"]
custom_minimum_size = Vector2(200, 60)
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -30.0
offset_bottom = 23.0
grow_horizontal = 0
theme_override_styles/panel = SubResource("StyleBoxEmpty_q68mp")

[node name="VBoxContainer" type="VBoxContainer" parent="UIComponents/SimulationHUD"]
layout_mode = 2

[node name="GenerationLabel" type="Label" parent="UIComponents/SimulationHUD/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "generation"
horizontal_alignment = 2

[node name="ScoreLabel" type="Label" parent="UIComponents/SimulationHUD/VBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "score"
horizontal_alignment = 2
vertical_alignment = 2

[node name="SimulationControls" type="MarginContainer" parent="UIComponents"]
custom_minimum_size = Vector2(100, 360)
offset_right = 90.0
offset_bottom = 360.0
size_flags_vertical = 3

[node name="BackgroundPanel" type="Panel" parent="UIComponents/SimulationControls"]
modulate = Color(1, 1, 1, 0.47843137)
layout_mode = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_f140w")

[node name="SimOptionsLabel" type="Label" parent="UIComponents/SimulationControls"]
custom_minimum_size = Vector2(90, 0)
layout_mode = 2
size_flags_vertical = 0
text = "Simulation Options"
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 3

[node name="MContainerT" type="MarginContainer" parent="UIComponents/SimulationControls"]
layout_mode = 2
size_flags_vertical = 0
theme_override_constants/margin_top = 60

[node name="HBoxContainer" type="HBoxContainer" parent="UIComponents/SimulationControls/MContainerT"]
layout_direction = 2
layout_mode = 2
alignment = 1

[node name="ResetButton" type="TextureButton" parent="UIComponents/SimulationControls/MContainerT/HBoxContainer" node_paths=PackedStringArray("MainScene")]
layout_mode = 2
toggle_mode = true
texture_normal = ExtResource("5_i0j58")
texture_pressed = ExtResource("5_i0j58")
script = ExtResource("6_gyaec")
MainScene = NodePath("../../../../..")

[node name="ExportButton" type="TextureButton" parent="UIComponents/SimulationControls/MContainerT/HBoxContainer"]
layout_mode = 2
texture_normal = ExtResource("6_c1ier")
script = ExtResource("8_p5ymy")

[node name="ImportButton" type="TextureButton" parent="UIComponents/SimulationControls/MContainerT/HBoxContainer"]
layout_mode = 2
texture_normal = ExtResource("7_gyaec")
script = ExtResource("10_3va76")

[node name="MContainerB" type="MarginContainer" parent="UIComponents/SimulationControls"]
custom_minimum_size = Vector2(100, 0)
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 8
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 40

[node name="VButtonContainer" type="VBoxContainer" parent="UIComponents/SimulationControls/MContainerB"]
layout_mode = 2
size_flags_horizontal = 8

[node name="PauseLabel" type="Label" parent="UIComponents/SimulationControls/MContainerB/VButtonContainer"]
layout_mode = 2
text = "Pause Sim"
horizontal_alignment = 1

[node name="TimeButton" type="TextureButton" parent="UIComponents/SimulationControls/MContainerB/VButtonContainer"]
unique_name_in_owner = true
custom_minimum_size = Vector2(80, 40)
layout_mode = 2
size_flags_horizontal = 0
toggle_mode = true
texture_normal = ExtResource("6_0iob3")
texture_pressed = ExtResource("5_f140w")
script = ExtResource("7_4b75m")

[node name="SkipLabel" type="Label" parent="UIComponents/SimulationControls/MContainerB/VButtonContainer"]
layout_mode = 2
text = "Next Gen"
horizontal_alignment = 1

[node name="SkipButton" type="TextureButton" parent="UIComponents/SimulationControls/MContainerB/VButtonContainer"]
unique_name_in_owner = true
layout_mode = 2
texture_normal = ExtResource("8_xb4mg")
script = ExtResource("9_5qxwa")

[node name="LoopLabel" type="Label" parent="UIComponents/SimulationControls/MContainerB/VButtonContainer"]
layout_mode = 2
text = "Autoplay"
horizontal_alignment = 1

[node name="LoopButton" type="TextureButton" parent="UIComponents/SimulationControls/MContainerB/VButtonContainer"]
unique_name_in_owner = true
layout_mode = 2
toggle_mode = true
texture_normal = ExtResource("10_5qxwa")
texture_pressed = ExtResource("9_6t1o7")
script = ExtResource("12_xc4hf")

[node name="RoomContainer" type="Node2D" parent="."]
unique_name_in_owner = true
process_mode = 1

[node name="AgentContainer" type="Node2D" parent="."]
unique_name_in_owner = true
process_mode = 1
y_sort_enabled = true
